<div class="container bg-our-back-green" data-controller="create-room">
  <div  class="col-md-4">

    <% if @house.photo.attached? %>

      <div class="text-center mb-3">
        <%= cl_image_tag @house.photo.key, height: 200, width: 266, crop: :fill %>
      </div>

    <% end %>

    <!-- Show House Details Button -->
    <button class="btn btn-primary mb-3" type="button" data-bs-toggle="collapse" data-bs-target="#houseInfo" aria-expanded="false" aria-controls="houseInfo">
      Show House Details
    </button>

    <!-- House Details (Collapsible) -->
    <div class="collapse" id="houseInfo">
      <div class="card card-body">
        <p>Name: <%= @house.name %></p>
        <p>Address: <%= @house.address %></p>
        <p>Capacity: <%= @house.capacity %></p>
        <p>Number of rooms: <%= @house.rooms.count %></p>
      </div>
    </div>
  </div>

  <%# enter rooms %>
  <div class="col-md-8">
    <div data-create-room-target="list">
      <% house.rooms.each do |room| %>

        <%# ticket-list %>
        <div class="list-group list-group-flush" style= "border-color: #E0702D">

          <% unless @room.nil? %>
            <% room.tickets.each do |ticket| %>

              <%= link_to ticket_path(ticket), class:"list-group-item list-group-item-action flex-column align-items-start bg-our-back-green", style:"border-color: #E0702D" do %>

                <div class="d-flex w-100 justify-content-between">
                  <h5 class="mb-1 mt-2"><strong><%= ticket.title %></strong></h5>

                  <small class="mb-1 mt-2 status-pills status-owner-<%= ticket.status.split(" ").join.downcase %> "><%= ticket.status%></small>

                </div>
                <p class="mb-1"><%=ticket.description %></p>

              <% end %>

            <% end %>


          <% else %>
            <h2>There are no tickets yet</h2>
          <% end %>

        </div>


      <% end %>
    </div>
  </div>

  <%= link_to "Edit House", edit_house_path(house) %>

  <%= link_to "Add Room", new_house_room_path(house), data: { action: "click->create-room#displayForm" } %>

  <%= link_to "Back", dashboard_path %>

  <div data-create-room-target="formContainer" class="d-none">
    <div><%= render "formRoom", house: house, room: room %></div>
  </div>

</div>
